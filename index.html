<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Happy Birthday Victoria üéâ</title>
  <link rel="icon" type="image/png" href="https://cdn-icons-png.flaticon.com/512/869/869869.png">
  <link href="https://fonts.googleapis.com/css2?family=Quicksand:wght@600;700&display=swap" rel="stylesheet">
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    html,
    body {
      font-family: 'Quicksand', sans-serif;
      background: linear-gradient(135deg, #828b4f, #046b79, rgb(151, 145, 145));
      color: #ffffff;
      line-height: 1.6;
      overflow-x: hidden;
      position: relative;
      min-height: 100vh;
    }

    #heart-container {
      position: fixed;
      left: 0;
      top: 0;
      width: 100vw;
      height: 100vh;
      pointer-events: none;
      z-index: 999;
    }

    .heart {
      position: absolute;
      width: 28px;
      height: 28px;
      background: url('https://cdn-icons-png.flaticon.com/512/833/833472.png') no-repeat center/contain;
      opacity: 0.9;
      z-index: 999;
      pointer-events: none;
      will-change: transform, opacity;
    }

    .confetti {
      position: fixed;
      width: 10px;
      height: 18px;
      z-index: 2000;
      pointer-events: none;
    }

    /* Removed COUNTDOWN SPLASH styles */

    #splash {
      position: fixed;
      top: 0;
      left: 0;
      width: 100vw;
      height: 100vh;
      background: linear-gradient(135deg, #ffd5ec, #c3f8ff);
      z-index: 9999;
      display: flex;
      align-items: center;
      justify-content: center;
      animation: fadeIn 1.5s ease forwards;
      transition: opacity 1.3s;
    }

    #splash-inner {
      background: rgba(255, 255, 255, 0.97);
      border-radius: 22px;
      box-shadow: 0 10px 54px 0 #0002;
      padding: 2.5rem 2.3rem 2.2rem 2.3rem;
      text-align: center;
      min-width: 300px;
      max-width: 90vw;
      animation: popIn 1.6s cubic-bezier(.25, 1.7, .5, .8);
    }

    #splash h2 {
      font-size: 2rem;
      color: #5f2c82;
      margin-bottom: 0.7em;
      letter-spacing: 1px;
    }

    .splash-form label {
      font-weight: bold;
      color: #5f2c82;
      margin: 1.3em 0 0.22em 0;
      text-align: left;
      display: block;
    }

    .splash-form input {
      width: 100%;
      font-size: 1.1rem;
      border-radius: 9px;
      padding: 0.55em 0.7em;
      outline: none;
      border: 1.5px solid #b88700;
      background: #f9f6e4;
      margin-bottom: 0.1em;
      transition: border 0.2s;
      text-transform: none !important;
    }

    .splash-form input:focus {
      border-color: #5f2c82;
    }

    .splash-form button {
      margin-top: 1.5em;
      font-size: 1.1rem;
      background: linear-gradient(90deg, #b88700, #5f2c82 80%);
      color: #fff;
      border: none;
      padding: 0.7em 2em;
      border-radius: 20px;
      cursor: pointer;
      box-shadow: 0 2px 10px #0001;
      font-weight: 700;
      letter-spacing: 1px;
      transition: background 0.2s;
    }

    .splash-form button:hover {
      background: linear-gradient(90deg, #5f2c82 10%, #b88700 90%);
    }

    .splash-error {
      color: #d92c2c;
      margin-top: 1.2em;
      font-weight: 600;
      font-size: 1.1rem;
      min-height: 1.5em;
      letter-spacing: 0.5px;
    }

    #main-content {
      max-width: 700px;
      margin: 0 auto;
      margin-top: 6.5rem;
      padding: 2.8rem 2rem 2rem 2rem;
      background: rgba(0, 0, 0, 0.16);
      border-radius: 32px;
      box-shadow: 0 8px 48px #0002, 0 2px 12px #5f2c8220;
      text-align: center;
      opacity: 0;
      transition: opacity 1.5s ease;
      position: relative;
      z-index: 1;
      min-height: 440px;
    }

    #main-content.visible {
      opacity: 1;
    }

    #main-content h1 {
      font-size: 2rem;
      color: #b88700;
      margin-bottom: 1rem;
      letter-spacing: 1.2px;
      text-shadow: 0 2px 0 #fff4, 0 6px 18px #b8870055;
    }

    #message-body {
      margin-bottom: 2rem;
      height: 200px;
      max-height: 200px;
      overflow-y: auto;
      min-height: 160px;
      font-size: 1.13rem;
      color: #fff;
      text-align: left;
      line-height: 1.7;
      font-family: 'Quicksand', sans-serif;
      white-space: pre-line;
      background: transparent;
      /* You can adjust the height as needed */
    }

    .typing-cursor {
      display: inline-block;
      width: 16px;
      color: #b88700;
      animation: blink 1s steps(1) infinite;
      font-weight: bold;
    }

    @keyframes blink {

      0%,
      100% {
        opacity: 1;
      }

      50% {
        opacity: 0;
      }
    }

    #reveal-btn {
      margin-top: 1.5rem;
      background: #b88700;
      color: white;
      border: none;
      border-radius: 30px;
      padding: 0.8rem 1.5rem;
      font-size: 1rem;
      font-weight: bold;
      letter-spacing: 0.7px;
      cursor: pointer;
      transition: background 0.3s;
    }

    #reveal-btn:hover {
      background: #b48605c7;
    }

    #popup-overlay {
      position: fixed;
      top: 0;
      left: 0;
      width: 100vw;
      height: 100vh;
      background: rgba(0, 0, 0, 0.6);
      display: none;
      align-items: center;
      justify-content: center;
      z-index: 10000;
    }

    #video-popup {
      background: white;
      border-radius: 15px;
      box-shadow: 0 8px 24px rgba(0, 0, 0, 0.3);
      width: 390px;
      height: 844px;
      max-width: 90vw;
      max-height: 90vh;
      display: none;
      flex-direction: column;
      position: relative;
      overflow: hidden;
    }

    #birthday-video {
      width: 100%;
      height: 100%;
      border-radius: 15px;
      cursor: pointer;
      background: black;
      z-index: 1;
    }

    #close-popup {
      position: absolute;
      top: 10px;
      right: 10px;
      background: #5f2c82;
      border: none;
      color: white;
      border-radius: 50%;
      width: 30px;
      height: 30px;
      font-weight: bold;
      font-size: 1.2rem;
      cursor: pointer;
      z-index: 10001;
    }

    .comment-popup {
      position: absolute;
      top: 10%;
      right: 5%;
      background: #ffffffee;
      border-radius: 12px;
      box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
      padding: 1rem;
      max-width: 250px;
      z-index: 10;
      font-size: 0.95rem;
      color: #333;
      animation: fadeCommentIn 1s ease forwards;
      display: none;
    }

    .firework {
      position: fixed;
      pointer-events: none;
      z-index: 16000;
      top: 0;
      left: 0;
      width: 100vw;
      height: 100vh;
      overflow: visible;
      pointer-events: none;
    }

    @keyframes fadeCommentIn {
      0% {
        opacity: 0;
        transform: translateY(-20px);
      }

      100% {
        opacity: 1;
        transform: translateY(0);
      }
    }

    @keyframes fadeIn {
      from {
        opacity: 0;
      }

      to {
        opacity: 1;
      }
    }

    @keyframes fadeOut {
      from {
        opacity: 1;
      }

      to {
        opacity: 0;
      }
    }

    @keyframes popIn {
      from {
        transform: scale(0.8);
        opacity: 0;
      }

      to {
        transform: scale(1);
        opacity: 1;
      }
    }
  </style>
</head>

<body>
  <div id="heart-container"></div>
  <div class="firework" id="firework-canvas"></div>

  <!-- COUNTDOWN SPLASH SCREEN REMOVED -->

  <div id="splash">
    <div id="splash-inner">
      <h2>It's your day again... after a whole year üéâ</h2>
      <form class="splash-form" id="splash-form" autocomplete="off">
        <label for="name">Your first name</label>
        <input type="text" id="name" name="name" placeholder="First name..." required autocomplete="off" />
        <label for="dob">Date of Birth</label>
        <input type="date" id="dob" name="dob" required autocomplete="off" />
        <label for="age">How old today?</label>
        <input type="number" id="age" name="age" min="1" max="150" required autocomplete="off" placeholder="e.g., 22" />
        <button type="submit">Start</button>
        <div class="splash-error" id="splash-error"></div>
      </form>
    </div>
  </div>
  <audio id="splash-audio" src="splash_music.mp3" preload="auto"></audio>
  <div id="main-content">
    <h1>üéâ Happy Birthday, Fadare Oluwaseun Victoria üéÇ</h1>
    <div id="message-body"></div>
    <button id="reveal-btn" style="display:none;">Click Me üéÅ</button>
  </div>
  <div id="popup-overlay">
    <div id="video-popup">
      <button id="close-popup" title="Close popup">&times;</button>
      <video id="birthday-video" playsinline>
        <source src="happy_birthday_video.mp4" type="video/mp4" />
        Your browser does not support the video tag.
      </video>
      <div id="video-comment" class="comment-popup">
        Don't mind the Voice, I can sing better nowüòÇ
      </div>
      <div id="video-comment1" class="comment-popup">
        The pa pa pa sound, is the sustain pedal for the keyboard
      </div>
    </div>
  </div>
  <script>
    // Accept either "Victoria" or "Oluwaseun" as name (case-insensitive)
    const CELEBRANT_NAMES = ["victoria", "oluwaseun"];
    const CELEBRANT_DOB = "2004-06-21";
    const CELEBRANT_AGE = 21;
    function normalizeName(str) {
      return (str || "").trim().toLowerCase();
    }
    function sameDate(val1, val2) {
      return val1 === val2;
    }
    const splashForm = document.getElementById('splash-form');
    const splashError = document.getElementById('splash-error');
    const mainContent = document.getElementById('main-content');
    const splashAudio = document.getElementById('splash-audio');
    const revealBtn = document.getElementById('reveal-btn');
    const popupOverlay = document.getElementById('popup-overlay');
    const videoPopup = document.getElementById('video-popup');
    const birthdayVideo = document.getElementById('birthday-video');
    const closePopup = document.getElementById('close-popup');
    const messageBody = document.getElementById('message-body');
    let audioShouldPlay = false;

    // Hearts control
    let heartsIntervalID = null;
    let heartsStarted = false;
    let allowHeartStart = false;

    // Confetti and Fireworks helpers
    function randomColor() {
      const colors = ["#ff3f70", "#f2e94e", "#56cfe1", "#b983ff", "#f48c06", "#fff", "#7cffcb", "#fcb900", "#fa5252"];
      return colors[Math.floor(Math.random() * colors.length)];
    }
    function throwConfettiBurst(times = 70) {
      for (let i = 0; i < times; i++) {
        setTimeout(() => launchConfettiPiece(), Math.random() * 1200 + 120);
      }
    }
    function launchConfettiPiece() {
      const div = document.createElement('div');
      div.className = 'confetti';
      div.style.left = (5 + Math.random() * 90) + "vw";
      div.style.top = "-30px";
      div.style.background = randomColor();
      div.style.borderRadius = `${Math.random() > 0.5 ? 6 : 100}% 100% 60% 60%`;
      div.style.transform = `rotate(${Math.random() * 360}deg)`;
      div.style.opacity = 0.7 + Math.random() * 0.3;
      div.style.zIndex = 2000;
      div.style.transition = "top 1.7s cubic-bezier(.3,1.1,.6,1),opacity 0.8s";
      document.body.appendChild(div);
      setTimeout(() => {
        div.style.top = (60 + Math.random() * 30) + "vh";
        div.style.opacity = 0;
      }, 25 + Math.random() * 110);
      setTimeout(() => div.remove(), 2000);
    }
    function launchFirework(cx = null, cy = null) {
      // Simple SVG firework burst
      const canvas = document.getElementById('firework-canvas');
      const svg = document.createElementNS("http://www.w3.org/2000/svg", "svg");
      svg.setAttribute("width", "160");
      svg.setAttribute("height", "160");
      svg.style.position = "absolute";
      svg.style.left = (cx !== null ? cx : Math.random() * window.innerWidth - 80) + "px";
      svg.style.top = (cy !== null ? cy : (window.innerHeight * 0.25 + Math.random() * window.innerHeight * 0.5 - 80)) + "px";
      svg.style.pointerEvents = "none";
      for (let i = 0; i < 14; i++) {
        const l = document.createElementNS("http://www.w3.org/2000/svg", "line");
        l.setAttribute("x1", 80); l.setAttribute("y1", 80);
        const angle = (i / 14) * 2 * Math.PI;
        l.setAttribute("x2", 80 + Math.cos(angle) * 60);
        l.setAttribute("y2", 80 + Math.sin(angle) * 60);
        l.setAttribute("stroke", randomColor());
        l.setAttribute("stroke-width", Math.random() * 3 + 1.5);
        svg.appendChild(l);
      }
      svg.style.opacity = 1;
      canvas.appendChild(svg);
      setTimeout(() => {
        svg.style.transition = "opacity 0.7s";
        svg.style.opacity = 0;
      }, 420);
      setTimeout(() => svg.remove(), 1100);
    }

    splashForm.addEventListener('submit', function (e) {
      e.preventDefault();
      splashError.textContent = "";
      const name = normalizeName(splashForm.name.value);
      const dob = splashForm.dob.value;
      const age = parseInt(splashForm.age.value, 10);
      if (
        CELEBRANT_NAMES.includes(name) &&
        sameDate(dob, CELEBRANT_DOB) &&
        age === CELEBRANT_AGE
      ) {
        startExperience();
      } else {
        splashError.textContent = "Are you sure you're the celebrant? üòâ Try again!";
      }
    });
    splashForm.addEventListener('keyup', function (e) {
      if (e.key === "Enter") splashForm.dispatchEvent(new Event('submit'));
    });
    function fadeAudioTo(target, duration = 700) {
      if (!audioShouldPlay) return;
      const start = splashAudio.volume;
      const diff = target - start;
      if (diff === 0) return;
      const steps = 18;
      let i = 0;
      const interval = duration / steps;
      const stepSize = diff / steps;
      function doStep() {
        splashAudio.volume = +(splashAudio.volume + stepSize).toFixed(3);
        i++;
        if ((stepSize > 0 && splashAudio.volume >= target) ||
          (stepSize < 0 && splashAudio.volume <= target) ||
          i >= steps) {
          splashAudio.volume = target;
          return;
        }
        setTimeout(doStep, interval);
      }
      doStep();
    }
    function startExperience() {
      audioShouldPlay = true;
      splashAudio.volume = 0.10; // Start low!
      splashAudio.loop = true;
      splashAudio.muted = false;
      splashAudio.play().catch(() => { });
      splash.style.animation = 'fadeOut 1.2s forwards';
      setTimeout(() => {
        splash.style.display = 'none';
        mainContent.classList.add('visible');
        typeBirthdayMessage();
      }, 1300);
      splashForm.querySelectorAll('input,button').forEach(el => el.disabled = true);
    }

    // Typing animation for message with pauses and slower speed
    const paragraphs = [
      "Today, the world spins a little brighter because it‚Äôs the day you came into it. I remember the first day I met you at the library, I really don't know why I talked to you then, probably cause I was looking for a chemistry proüòÇ, I'm glad I did, and It's been great knowing you ever since.",
      "You are a good person Seun, and you've been nothing short of someone who wants the best for others around them",
      "You are strong, intelligent, and filled with a light that deserves to be seen. I want nothing more than to see you happy, successful, and surrounded by the love and wins you deserve.",
      "As you celebrate another year of life, I pray that you continue to grow, learn, and embrace all the opportunities that come your way. May this year bring you closer to your dreams and fill your heart with joy. In Jesus Nameüôè",
      "So here‚Äôs a little surprise because great people deserve more moments that remind them how valued they are.",
      "Hit the button when you‚Äôre ready. This one‚Äôs from me, to you. üéπüíõ"
    ];
    function typeBirthdayMessage() {
      let pIndex = 0;
      messageBody.innerHTML = "";
      function typeParagraph() {
        if (pIndex >= paragraphs.length) {
          document.getElementById('reveal-btn').style.display = '';
          return;
        }
        let text = paragraphs[pIndex];
        let i = 0;
        let para = document.createElement('p');
        messageBody.appendChild(para);
        let cursor = document.createElement('span');
        cursor.className = 'typing-cursor';
        cursor.textContent = '|';
        para.appendChild(cursor);
        function typeChar() {
          if (i < text.length) {
            para.insertBefore(document.createTextNode(text[i]), cursor);
            let char = text[i];
            i++;
            let delay = 48 + Math.random() * 50;
            if (char === ',') delay += 220;
            if (char === '.' || char === '!' || char === '?') delay += 350;
            if (char === ';' || char === '‚Äî') delay += 120;
            // AUTO-SCROLL TO BOTTOM AFTER EACH CHAR
            messageBody.scrollTop = messageBody.scrollHeight;
            setTimeout(typeChar, delay);
          } else {
            para.removeChild(cursor);
            pIndex++;
            setTimeout(typeParagraph, 500);
          }
        }
        typeChar();
      }
      typeParagraph();
    }

    // Gas-molecule-like Heart Animation
    function createHeart(side) {
      const container = document.getElementById('heart-container');
      const heart = document.createElement('div');
      heart.classList.add('heart');
      heart.style.bottom = (10 + Math.random() * 35) + 'px';
      heart.style.width = heart.style.height = (24 + Math.random() * 12) + 'px';
      const duration = 2200 + Math.random() * 700;
      let startX, endX;
      if (side === "left") {
        startX = 32 + Math.random() * 10;
        endX = 70 + Math.random() * 100;
        heart.style.left = startX + "px";
      } else {
        startX = 32 + Math.random() * 10;
        endX = 70 + Math.random() * 100;
        heart.style.right = startX + "px";
      }
      const startAngle = (side === "left" ? -10 : 10) + Math.random() * 14 - 7;
      const endAngle = (side === "left" ? 30 : -30) + Math.random() * 20 - 10;
      const startScale = 1;
      const endScale = 1.3 + Math.random() * 0.5;
      const wiggleX = (Math.random() - 0.5) * 60;
      const wiggleY = 40 + Math.random() * 40;
      const start = performance.now();
      function animateHeart(now) {
        const elapsed = now - start;
        const progress = Math.min(elapsed / duration, 1);
        const y = progress * (window.innerHeight * 0.7 + wiggleY);
        let x;
        if (side === "left") {
          x = startX + (endX - startX) * progress + Math.sin(progress * Math.PI * 2) * wiggleX;
          heart.style.left = x + "px";
        } else {
          x = startX + (endX - startX) * progress + Math.sin(progress * Math.PI * 2 + Math.PI) * wiggleX;
          heart.style.right = x + "px";
        }
        const angle = startAngle + (endAngle - startAngle) * progress;
        const scale = startScale + (endScale - startScale) * progress;
        heart.style.transform = `translateY(-${y}px) scale(${scale}) rotate(${angle}deg)`;
        heart.style.opacity = (1 - progress) * 0.9;
        if (progress < 1) {
          requestAnimationFrame(animateHeart);
        } else {
          heart.remove();
        }
      }
      requestAnimationFrame(animateHeart);
      container.appendChild(heart);
    }
    function startHearts() {
      if (heartsIntervalID) return;
      let count = 0;
      heartsIntervalID = setInterval(() => {
        if (Math.random() > 0.7) {
          createHeart("left");
          createHeart("right");
          if (Math.random() > 0.6) createHeart(Math.random() > 0.5 ? "left" : "right");
        } else {
          createHeart(count % 2 === 0 ? "left" : "right");
        }
        count++;
      }, 180);
    }

    // Start hearts ONLY after 24s into the video, first time video is revealed
    revealBtn.addEventListener('click', () => {
      popupOverlay.style.display = 'flex';
      videoPopup.style.display = 'flex';
      birthdayVideo.play().catch(() => { });
      fadeAudioTo(0, 700);

      // Only add listener once
      if (!heartsStarted) {
        const tryStartHearts = () => {
          if (birthdayVideo.currentTime >= 24) {
            if (!heartsStarted) {
              startHearts();
              heartsStarted = true;
              throwConfettiBurst(60);
              for (let i = 0; i < 3; i++) setTimeout(() => launchFirework(), 100 + i * 300);
            }
            birthdayVideo.removeEventListener('timeupdate', tryStartHearts);
          }
        };
        birthdayVideo.addEventListener('timeupdate', tryStartHearts);
      }
    });

    function resumeAudioAfterVideo() {
      audioShouldPlay = true;
      if (splashAudio.paused) splashAudio.play().catch(() => { });
      fadeAudioTo(0.10, 800);
      popupOverlay.style.display = 'none';
      videoPopup.style.display = 'none';
      setTimeout(() => {
        // Celebrate again after video closes
        throwConfettiBurst(40);
        for (let i = 0; i < 2; i++) setTimeout(() => launchFirework(), 200 + i * 200);
      }, 500);
    }
    closePopup.addEventListener('click', () => {
      birthdayVideo.pause();
      popupOverlay.style.display = 'none';
      videoPopup.style.display = 'none';
      resumeAudioAfterVideo();
    });
    birthdayVideo.addEventListener('ended', resumeAudioAfterVideo);
    birthdayVideo.addEventListener('click', () => {
      if (birthdayVideo.paused) birthdayVideo.play();
      else birthdayVideo.pause();
    });
    birthdayVideo.addEventListener('timeupdate', () => {
      const commentBox = document.getElementById('video-comment');
      const commentBox1 = document.getElementById('video-comment1');
      if (birthdayVideo.currentTime >= 13 && birthdayVideo.currentTime < 19) {
        commentBox.style.display = 'block';
      } else {
        commentBox.style.display = 'none';
      }
      if (birthdayVideo.currentTime >= 21 && birthdayVideo.currentTime < 25) {
        commentBox1.style.display = 'block';
      } else {
        commentBox1.style.display = 'none';
      }
    });

    // Remove/hide countdown logic: skip directly to splash
    document.getElementById('splash').style.display = 'flex';
    document.getElementById('main-content').classList.remove('visible');
  </script>
</body>

</html>